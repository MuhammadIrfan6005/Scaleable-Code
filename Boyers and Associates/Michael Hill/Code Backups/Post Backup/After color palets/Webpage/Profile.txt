<script>

address = window.location.href;
let result = address.includes("ChangePasswordSuccess");
if(result === true){
  d = document.getElementsByTagName("*");
  for(i =0; i<d.length;i++)
  {
  d[0].style.opacity = "0";
  }
    window.location.href = "/account";
}
document.getElementsByTagName("body")[0].style.opacity = "1";

$("#mainContent").addClass("bg-black")

</script>

<script type="text/javascript" src="/profile.js"></script>
{{ snippets["Desire/Breadcrumb"] }}


<h2 class="theme-color">You're almost ready to recycle</br> your gold. Simply confirm the following details to start.</h2>

<style>
    @media screen and (min-device-width: 1285px) {

        /* hiding the OOB available profile section */
        .container:nth-of-type(4) .row .col-md-4 {
            display: none;
        }

        /* maincontent width specify */
        div#mainContent {
            width: 100%;
        }

        /* adjusting maincontent */
        .xrm-editable-html .xrm-attribute-value h2 {
            margin: 0 auto;
            width: 382px;
        }

        /* adjusting profile section */
        div#ProfileFormView {
            margin: 0 auto;
            width: 382px;
        }

        /* Submit button */
        .actions input {
            margin: 0 auto;
            width: 382px !important;
            max-width: 382px !important;
        }
    }

    /* For tablets  */
    @media screen and (min-device-width: 768px) and (max-width: 1280px) {
        .container:nth-of-type(4) .row .col-md-4 {
            display: none;
        }

        /* maincontent width specify */
        div#mainContent {
            width: 100%;
        }

        /* adjusting maincontent */
        .xrm-editable-html .xrm-attribute-value h2 {
            margin: 0 auto;
            width: 382px;
        }

        /* adjusting profile section */
        div#ProfileFormView {
            margin: 0 auto;
            width: 382px;
        }

        /* Submit button */
        .actions input {
            margin: 0 auto;
            width: 382px !important;
            max-width: 382px !important;
        }
    }

    @media screen and (max-device-width: 390px) {
        input#ContentContainer_MainContent_MainContent_ContentBottom_SubmitButton {
            width: 320px !important;
        }
    }

    @media screen and (max-device-width: 280px) {
        input#ContentContainer_MainContent_MainContent_ContentBottom_SubmitButton {
            width: 250px !important;
        }
    }

    input#ContentContainer_MainContent_MainContent_ContentBottom_SubmitButton {
        width: 360px;
    }

    /* Adding padding top to input labels */

    #mobilephone_label,
    #lastname_label {
        margin-top: 20px;
    }
    
    /* changing anchorlink color and adding underline */
    a.text-primary.text-decoration-none {
        text-decoration: underline !important;
        color: white !important;
    }

    /* Making input radius round */

    .control input {
        border-radius: 4px !important;
    }

    /* can't find address */

    .crmEntityFormView .cell.zero-cell {
        display: block;
        /*padding-top: 40px; */
    }

    .autocomplete {
        position: relative;
        display: inline-block;
    }

    .autocomplete-items {
        flex-direction: column;
        /* padding-left: 0; */
        /* margin-bottom: 0; */
        border-radius: var(--bs-list-group-border-radius);
        /* position: absolute; */
        border: 1px solid #d4d4d4;
        border-bottom: none;
        border-top: none;
        z-index: 99;
        /*position the autocomplete items to be the same width as the container:*/
        /*top: 100%;*/
        left: 0;
        right: 0;
        color: #000;
        /* margin: 50px 15px; */
    }

    .autocomplete-items div {
        padding: 10px;
        cursor: pointer;
        background-color: #fff;
        border-bottom: 1px solid #d4d4d4;
    }

    .profile-info,
    .nav-profile,
    .page-heading,
    .alert.alert-info {
        display: none !important;
    }

    #content_form .container {
        max-width: 100%;
    }

    #content_form .container .row .col-md-4 {
     display: none;
    }

    [aria-label="Postal Address"] .field-label {
     padding-top: 20px;
    }

    [aria-label="Postal Address"] .section-title {
       margin-bottom: 0px !important;
    }

    .xrm-editable-html .xrm-attribute-value h2 {
        padding: 32px 16px 8px 0px;
    }

    table {
        margin-top: 24px;
    }

    .section-title {
        font-weight: 600 !important;
        font-size: 14px !important;
        margin-top: 24px !important;
        margin-bottom: 24px !important;
    }

    .crmEntityFormView fieldset {
        margin-bottom: 0px !important;
    }

    .crmEntityFormView .cell {
        margin-bottom: 12px;
        padding: 0px;
    }

    #ContentContainer_MainContent_MainContent_ContentBottom_MarketingOptionsPanel {
        display: none !important;
    }

    .actions {
        padding: 0 16px 32px 16px;
        text-align: center;
    }

    #spanId {
        display: none;
    }

    .crmEntityFormView .cell div.info.required label:after {
        content: '';
    }

    .marketing-consent-container .form-check-label {
        margin-bottom: 0.5em;
        margin-top: 0.25em;
    }
    
    .marketing-consent-container{
    margin-bottom: 0px !important;
    }
</style>

<script>
    //  $("fieldset[aria-label='Postal Address']").find("a").removeClass("text-primary text-decoration-none").addClass("text-white");

    $(document).ready(function () {
        $("fieldset[aria-label='New Section']").hide();
        $("fieldset[aria-label='Personal details']").after('</br><div class="form-check marketing-consent-container"><input class="form-check-input" type="checkbox" value="" id="DoNotSendMM_chk"><label class="form-check-label" for="DoNotSendMM_chk">Send Marketing Materials</label>');
        
        $('#DoNotSendMM_chk').on("change", function(){
        if($('#DoNotSendMM_chk').is(":checked"))
            $("#donotsendmm_0").prop("checked", true);
        else
            $("#donotsendmm_1").prop("checked", true);
        });

        //irf: changing profile page as per figma-->
        $(".section-title:first").html("Confirm details");
        $(".section-title:eq(1)").html("Postal address")
        $("#ContentContainer_MainContent_MainContent_ContentBottom_SubmitButton").val("Create an account");

        var input = document.querySelector('#address1_name');
        var element = input.parentNode;
        var td = element.parentNode;
        $(td).css("display", "block")

        $('fieldset table tbody tr').each(function (index, el) {
            if (index > 4) {
                $(el).hide();
            }

            if (index == 4) {
                $(el).find('.cell.zero-cell').append('<p>Can’t find address ? <a href="javascript:showManualEntry();" class="text-primary text-decoration-none">Enter manually</a> </p>')
                $(el).find('.cell.zero-cell').show();
            }
        });

        $('#address1_name').change(function () {
            $('#address1_nameautocomplete-list div').click(function () {
                showManualEntry();
            });
        });
        $('table.section tr').eq(2).hide();
        $('#emailaddress1').hide();
        $('#address1_line1_label').text('Address 1');
        $('#address1_line2_label').text('Address 2');
        $('.entity-form .cell.zero-cell').show();
        $('.submit-btn ').val('Save');
        $('.submit-btn ').addClass('w-100');
        // $($('table[data-name="sectionPersonal"] .cell.zero-cell')[0]).html(`Personal details need editing? Please get in touch with our <a target="_blank" href="https://www.michaelhill.com.au/customer-service/contact-us" class="text-primary">customer service </a> team to change any personal details.`)
        $('.crmEntityFormView .actions').append('<div class="mt-3 mb-4"><a class="btn btn-outline-primary text-decoration-none w-100" href="/Account" title="Cancel">Cancel</a></div>')
    });

    function showManualEntry() {
        $("#ContentContainer_MainContent_MainContent_ContentBottom_SubmitButton").val("Complete Profile")
        $('fieldset table tbody tr').each(function (index, el) {
            if (index > 4) {
                $(el).show();
            }

            if (index == 4) {
                //$(el).find('.cell.zero-cell').append('<p>Can’t find address ? <a href="" class="text-primary text-decoration-none">Enter manually</a> </p>')
                $(el).find('.cell.zero-cell').hide();
            }
        });
    }


</script>
          

{% if user %}
{% assign fullname = user.fullname %}
{% assign address = user.address1_name %}
{% assign email = user.emailaddress1 %}
{% assign mobile = user.mobilephone %}
{% if fullname.size > 0 and address.size > 0 and mobile.size > 0 %}
<script>
    location.replace('/account/');
</script>
{% endif %}
{% endif %}